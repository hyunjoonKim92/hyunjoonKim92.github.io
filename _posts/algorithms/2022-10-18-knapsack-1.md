---
layout: post
title: "[Algorithms] KnapSack Algorithms (1)"
date: 2022-10-18
description: KnapSack Algorithms
categories: [Algorithms]
---

## Knapsack Problem 이란?

도둑이 배낭을 메고 보석 가게에 들어왔다.
<br>
훔친 보석의 총 무게가 배낭의 용량 (W) 를 초과하면 배낭이 찢어진다.
<br>
도둑은 각 보석의 무게와 값어치를 알고 있는데 보석의 총 무게가 배낭의 용량을 넘지 않으면서도 보석의 총 값어치가 최대가 되도록 하는 보석을 배낭에 담는 딜레마가 있다.
<br>
이 때 보석을 자를 수 있는 문제인 Fractional KnapSack Problem 과 보석을 자를 수 없는 문제인 0-1 KnapSack Problem 이 있다. 보통 0-1 KnapSack Problem 이 주로 다뤄진다.
<br>
무게나 값어치를 기준으로 계산하면 최적의 해답을 얻을 수 없으므로, 무게 당 이익을 기준으로 계산해야 한다.
<br>

## Fractional KnapSack Problem (분할 가능한 배낭 문제)

**1. Greedy Approach (탐욕법)**

탐욕법을 사용하면 항상 최적의 답을 얻을 수 있다.
<br>
무게 당 이익이 높은 보석을 기준으로 먼저 넣으면 끝이다.
<br><br>
예를 들어
<br>
1번 아이템: 50 만원 / 5 KG
<br>
2번 아이템: 60 만원 / 10 KG
<br>
3번 아이템: 140 만원 / 20 KG
<br>
배낭에 담을 수 있는 총 무게는 30 KG
<br><br>
이 때, 무게 당 이익을 나타내면,
<br>
1번 아이템: 50 / 5 = 10 (만원)
<br>
2번 아이템: 60 / 10 = 6 (만원)
<br>
3번 아이템: 140 / 20 = 7 (만원)
<br>
이 되므로 무게 당 이익이 큰 것부터 나열하면 1번 아이템 > 3번 아이템 > 2번 아이템이 된다.
<br>
따라서 배낭에는 1번 아이템, 3번 아이템을 전부 넣고 2번 아이템을 5 KG 만 넣으면 최적의 해답이 나온다.
<br>
Greedy Approach 로 Fractional KnapSack Problem 은 항상 최적의 해답을 얻게되는 것이다.
<br>

## 0-1 KnapSack Problem (0-1 배낭 문제)

탐욕법으로는 0-1 배낭 문제를 풀 수 없습니다. 위의 아이템 예시를 동일하게 들겠다.
<br>
총 무게는 30 KG 이므로 2번 아이템, 3번 아이템을 넣으면 200 만원의 이익이 생긴다.
<br>
하지만 탐욕법을 사용해서 문제를 해결한다면 1번 아이템과 3번 아이템을 넣어서 190 만원의 이득밖에 못 챙긴다.
<br>
더 복잡한 탐욕 알고리즘을 사용하더라도 0-1 배낭 문제를 풀 수 없는 것이다.
<br>

**1. Dynamic Programming (동적 계획법)**

우선 DP 로 문제를 풀기 위해서는 최적의 원칙이 적용된다고 증명해야 한다.
<br>
만약 A 를 n 개의 아이템 중에서 최적을 이루는 부분집합이라고 가정한다.
<br>
이 때 A 가 n 번 아이템을 포함하는 경우와 포함하지 않는 경우 두 가지로 나눌 수 있다.
<br>
만약 n 번 아이템을 포함하지 않는다면 A 는 n - 1 개 아이템들 중에서 최적을 이루는 부분집합과 같다.
<br>
만약 n 번 아이템을 포함한다면 A 에 속한 아이템들의 총 무게는 W - w_n 을 초과하지 않는다는 조건 하에 n - 1 개의 아이템들을 선택하여 얻는 최적의 이익에다가 p_n 을 더한 것과 같다.
<br>
따라서 **최적의 원칙이 적용**된다.
<br><br>
이제 문제를 일반화할 수 있다.
<br>
i > 0 과 w > 0 인 경우 총 무게가 w 를 초과할 수 없다는 제약조건 하에서 처음 i 개 아이템에서만 선택할 때 얻는 최적의 이익을 P[i][w] 라고 하면 다음과 같은 식을 얻을 수 있다.
<br>

$$
P[i][w]=\left\{\begin{matrix}
maximum(P[i-1][w], p_i + P[i-1][w-w_i]) & w_i \leq w\\
P[i-1][w] & w_i > w \\
\end{matrix}\right.
$$

즉, 아이템을 넣을 수 있다면, 넣지 않았을 때와 넣었을 때를 비교해서 maximum 값을 넣으면 되고, 아이템을 넣을 수 없다면 바로 이전의 값을 가져오면 됩니다. 이 때 최대 이익은 p[n][W] 와 같다.
<br><br>
만약 모든 아이템의 무게의 합이 100 인데 배낭의 용량이 100 억이라면 어떻게 될까?
<br>
아마 쓸데없는 계산까지 하게 될 것이다.
<br><br>
즉 아이템의 수와 배낭의 무게는 아무런 상관관계가 없으며, 계산은 아래와 같다.

$$\Theta (nW)$$

따라서 DP 를 개선해야 할 필요성이 있다.
<br><br>

다음 장에서는 개선된 동적 계획법에 대해 다뤄보겠다.